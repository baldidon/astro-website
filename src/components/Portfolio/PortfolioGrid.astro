---
import { type CollectionEntry, getCollection, render } from "astro:content";
import { Icon } from "astro-icon/components";

// components
import PortfolioCard from "@components/PortfolioCard/PortfolioCard.astro";

interface Props {
	portfolios: CollectionEntry<"portfolios">[];
	noTransitions?: boolean;
}

const { portfolios, noTransitions = false } = Astro.props as Props;
---

<div
	class="mx-auto flex gap-4 overflow-x-auto snap-x snap-mandatory pt-8 sm:max-w-6xl md:pt-12 lg:grid lg:grid-cols-3 lg:gap-12 lg:overflow-visible relative -mx-4 px-4 scrollbar-hide"
	style="-webkit-overflow-scrolling: touch;"
>
	{portfolios.map((portfolio) => (
		<div class="flex w-full flex-col shrink-0 snap-start min-w-[85%] sm:min-w-[70%] md:min-w-[60%] lg:min-w-0 lg:shrink">
			<PortfolioCard portfolio={portfolio} direction="vertical" noTransitions={noTransitions} />
		</div>
	))}
</div>

<!-- mobile-only hint to indicate horizontal scrolling -->
<div class="mt-3 flex items-center justify-center gap-2 text-sm text-base-700 lg:hidden">
	<Icon name="tabler:arrow-narrow-right" class="h-4 w-4 animate-bounce-x-slow motion-reduce:animate-none" />
	<span>Scorri per vedere altri servizi</span>
</div>

<style>
	@keyframes bounce-x-slow {
		0%, 100% {
			transform: translateX(0);
		}
		50% {
			transform: translateX(6px);
		}
	}

	.animate-bounce-x-slow {
		animation: bounce-x-slow 2.5s ease-in-out infinite;
	}

	@media (prefers-reduced-motion: reduce) {
		.animate-bounce-x-slow {
			animation: none;
		}
	}
</style>
